[TOC]

# 1. 用户和组的相关概念

## 1.1 用户

在Linux系统中，根据系统管理的需要将用户帐号分为三种不同的类型：超级用户、普通用户、系统用户，每种类型的用户帐号其拥有的权限、担任的角色都各不相同。

- **超级用户**：root是Linux系统中默认的超级用户帐号，对系统拥有至高无上的完全权限。
    使用root帐号，管理员可以突破系统的一切限制，方便地维护系统。由于root用户权限太大，所以一般不建议直接用root用户登录系统，而是先使用普通用户账号登录，当要进行系统管理、维护任务时，才临时转换到root身份。

- **普通用户**：普通用户帐号需要由root用户或其他管理员用户创建，拥有的权限受到一定限制，一般只在用户自己的家目录中有完全权限。

- **系统用户**：这类用户最大的特点是不能登录系统，而主要是用于让后台进程或服务类进程以非管理员的身份运行。它们大多是在安装系统及部分应用程序时自动添加的

## 1.2 组

用户组是具有相同特征用户的逻辑集合，有时我们需要让多个用户具有相同的权限，比如查看、修改某一个文件的权限，一种方法是对多个用户进行文件访问授权，如果有10个用户的话，就需要授权10次，显然这种方法不太合理；**另一种方法是建立一个用户组，让这个组具有查看、修改此文件的权限，然后将所有需要访问此文件的用户放入这个组中，那么所看用户就具有了和组一样的权限**。<u>将用户分组是Linux系统中对用户进行管理及控制访问权限的一种手段，通过定来用户组，在很大程度上简化了管理工作</u>。

在Linux系统中，每一个用户帐号至少属于一个组，这个组称为该用户的基本组。与Windows不同，在Linux系统中每创建一个用户帐号就会自动创建一个与该帐号同名的用户组，比如我们已经创建了一个名为“student”的普通用户帐号，那么同时也将自动创建一个名为“student”的用户组.“student”用户默认就属于“student”组，这个组也就是“student”用户的基本组。

**在Linux系统中，每个用户可以同时加入多个组，这些用户又另外加入的组称为附加组。**

例如，将用户student再加入到邮件管理员组mailadm，那么student就同时属于student和
mailadm 组，student是其基本组，而mailadm是其附加组。student用户将同时拥有这两个组的所有权限。

## 1.3 UID和GID

- **UID**（User Identifier，用户标识符）是Linux系统中每一个用户帐号的唯一标识符，对于系统核心来说，UID是区分用户的基本依据（类似于Windows系统中的SID）。<u>root用户的UID为固定值0，系统用户帐号的UID默认在1-999之间，1000-60000的UID号默认分配给普通用户帐号使用。</u>
- **GID**（Group Identifier，组标识符）是每个组数字形式的标识符。root组的GID为固定值0，系统组帐号的GID默认在1-999之间，普通组帐号的UID默认为1000-60000

需要注意的是，**Linux系统其实只认识UID和GID**，至于用户帐号和组帐号只是为了方便人们记忆而已。比如root之所以是超级用户，并不是因为它的名字叫root，而是因为它的UID为0，因而系统中任何一个UID为0的用户，其实都是root用户。

# 2. 用户帐号文件：/etc/passwd文件

在passwd文件的开头部分，包括超级用户root和各系统用户的账号信息，系统中新增加的账户信息将保存到passwd文件的末尾。

passwd文件的每一行记录一个对应的用户，每行的各列被冒号"："分隔，其格式和具体的含义如下：

```
用户名：密码：UID：GID:注释性描述：家目录：默认shell
```

下面以root用户为例进行介绍：

```
root:x:0:0:root:/root:/bin/bash
```

- 第一字段：用户名root
- 第二字段：密码占位符x。密码占位符只是用来表示密码的，但实际的密码是保存在/etc/shadow文件中。这样设计是为了保证密码的安全性。
- 第三字段：UID 0。root用户默认UID为0
- 第四字段：GID 0。root用户默认GID为0
- 第五字段：描述，说明当前为root
- 第六字段：家目录/root
- 第七字段：默认shell为bash。如果更改这个shell，那么下次登录该账户默认的shell也会随之改变

# 3. 组信息文件：/etc/group

各用户组中，还是以 "：" 作为字段之间的分隔符，分为 4 个字段，每个字段对应的含义为：

```
组名：密码：GID：该用户组中的用户列表
```

下面以student组为例：

```
student:x:1000:student
```

- 第一字段：组名student
- 第二字段：密码占位符x。同样也是为了安全性
- 第三字段：GID 1000
- 第四字段：该用户组中的用户列表student

可通过"**id + 账户**"命令查看用户的id和所在的组

```shell
[root@localhost ~]# id student
uid=1000(student) gid=1000(student) 组=1000(student)
```

